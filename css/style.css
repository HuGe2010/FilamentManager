/* ========================================
   FilaMgr - 3D打印耗材管理系统 | 样式
   ======================================== */

:root {
  --sidebar-bg: #18181b;
  --sidebar-text: #a1a1aa;
  --accent: #e05c2e;
  --accent-hover: #c2410c;
  --bg: #f4f4f5;
  --card-bg: #ffffff;
  --card-border: #e4e4e7;
  --text-primary: #18181b;
  --text-secondary: #71717a;
  --text-muted: #a1a1aa;
  --success: #16a34a;
  --success-bg: #dcfce7;
  --danger: #dc2626;
  --danger-bg: #fee2e2;
  --warning: #d97706;
  --warning-bg: #fef3c7;
  --info: #2563eb;
  --info-bg: #dbeafe;
  --input-border: #d4d4d8;
  --radius: 8px;
  --radius-lg: 12px;
  --shadow: 0 1px 3px rgba(0,0,0,0.08),0 1px 2px rgba(0,0,0,0.06);
  --shadow-md: 0 4px 6px rgba(0,0,0,0.07),0 2px 4px rgba(0,0,0,0.06);
  --sidebar-width: 220px;
  --font-body: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-mono: 'DM Mono', 'Courier New', monospace;
}

*,*::before,*::after { box-sizing:border-box; margin:0; padding:0; }
html,body { height:100%; }
body { font-family:var(--font-body); font-size:14px; color:var(--text-primary); background:var(--bg); display:flex; overflow:hidden; }

/* ---- Sidebar ---- */
.sidebar { width:var(--sidebar-width); min-width:var(--sidebar-width); background:var(--sidebar-bg); display:flex; flex-direction:column; height:100vh; overflow-y:auto; position:fixed; left:0; top:0; z-index:100; }
.sidebar-header { padding:20px 16px 16px; border-bottom:1px solid #27272a; }
.logo { display:flex; align-items:center; gap:10px; }
.logo-text { font-size:16px; font-weight:600; color:#ffffff; letter-spacing:-0.3px; }
.nav-list { list-style:none; padding:10px 8px; flex:1; }
.nav-item { display:flex; align-items:center; gap:10px; padding:9px 10px; border-radius:var(--radius); cursor:pointer; color:var(--sidebar-text); transition:all 0.15s ease; margin-bottom:2px; user-select:none; }
.nav-item:hover { background:#27272a; color:#e4e4e7; }
.nav-item.active { background:var(--accent); color:#ffffff; }
.nav-icon { display:flex; align-items:center; flex-shrink:0; }
.nav-label { font-size:13.5px; font-weight:500; }
.sidebar-footer { padding:12px 16px; color:#52525b; font-size:11px; font-family:var(--font-mono); border-top:1px solid #27272a; }

/* ---- Main ---- */
.main-content { margin-left:var(--sidebar-width); flex:1; height:100vh; overflow-y:auto; }
#page-container { padding:28px 32px; }

/* ---- Page header ---- */
.page-header { margin-bottom:24px; }
.page-title { font-size:22px; font-weight:600; letter-spacing:-0.4px; }
.page-subtitle { font-size:13px; color:var(--text-secondary); margin-top:4px; }

/* ---- Cards ---- */
.card { background:var(--card-bg); border:1px solid var(--card-border); border-radius:var(--radius-lg); padding:20px 24px; box-shadow:var(--shadow); margin-bottom:16px; }
.card-title { font-size:11.5px; font-weight:600; color:var(--text-secondary); text-transform:uppercase; letter-spacing:0.6px; margin-bottom:12px; }
.stats-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(170px,1fr)); gap:14px; margin-bottom:20px; }
.stat-card { background:var(--card-bg); border:1px solid var(--card-border); border-radius:var(--radius-lg); padding:18px; box-shadow:var(--shadow); position:relative; overflow:hidden; }
.stat-card::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; background:var(--accent); }
.stat-label { font-size:12px; color:var(--text-secondary); font-weight:500; margin-bottom:8px; }
.stat-value { font-size:26px; font-weight:600; font-family:var(--font-mono); line-height:1; }
.stat-unit { font-size:12px; color:var(--text-secondary); font-weight:400; margin-left:4px; }

/* ---- Table ---- */
.table-wrapper { overflow-x:auto; border-radius:var(--radius-lg); border:1px solid var(--card-border); box-shadow:var(--shadow); }
table { width:100%; border-collapse:collapse; background:var(--card-bg); }
thead tr { background:#fafafa; border-bottom:1px solid var(--card-border); }
thead th { padding:10px 14px; text-align:left; font-size:11px; font-weight:600; color:var(--text-secondary); text-transform:uppercase; letter-spacing:0.5px; white-space:nowrap; }
tbody tr { border-bottom:1px solid #f4f4f5; transition:background 0.1s; }
tbody tr:last-child { border-bottom:none; }
tbody tr:hover { background:#fafafa; }
tbody td { padding:11px 14px; vertical-align:middle; font-size:13.5px; }

/* ---- Color swatch ---- */
.color-swatch { width:24px; height:24px; border-radius:50%; border:2px solid rgba(0,0,0,0.12); display:inline-block; flex-shrink:0; box-shadow:0 1px 3px rgba(0,0,0,0.15); }
.filament-cell { display:flex; align-items:center; gap:10px; }
.filament-name { font-weight:500; }
.filament-meta { font-size:12px; color:var(--text-muted); }

/* ---- Progress bar ---- */
.progress-wrap { display:flex; flex-direction:column; gap:4px; min-width:110px; }
.progress-bar-bg { height:5px; background:#e4e4e7; border-radius:99px; overflow:hidden; }
.progress-bar-fill { height:100%; border-radius:99px; background:var(--accent); transition:width 0.3s ease; }
.progress-bar-fill.warn { background:var(--warning); }
.progress-bar-fill.low  { background:var(--danger); }
.progress-text { font-size:11.5px; color:var(--text-secondary); font-family:var(--font-mono); }

/* ---- Badges ---- */
.badge { display:inline-block; padding:2px 8px; border-radius:4px; font-size:11.5px; font-weight:600; font-family:var(--font-mono); letter-spacing:0.3px; }
.badge-pla  { background:#dbeafe; color:#1d4ed8; }
.badge-petg { background:#d1fae5; color:#065f46; }
.badge-abs  { background:#fce7f3; color:#9d174d; }
.badge-asa  { background:#ffedd5; color:#9a3412; }
.badge-tpu  { background:#ede9fe; color:#5b21b6; }
.badge-pa   { background:#f0fdf4; color:#166534; }
.badge-pc   { background:#cffafe; color:#0e7490; }
.badge-other{ background:#f4f4f5; color:#52525b; }

/* ---- Buttons ---- */
.btn { display:inline-flex; align-items:center; gap:6px; padding:8px 14px; border-radius:var(--radius); border:none; font-family:var(--font-body); font-size:13px; font-weight:500; cursor:pointer; transition:all 0.15s ease; white-space:nowrap; }
.btn:disabled { opacity:0.5; cursor:not-allowed; }
.btn-primary { background:var(--accent); color:#ffffff; }
.btn-primary:hover:not(:disabled) { background:var(--accent-hover); }
.btn-secondary { background:#f4f4f5; color:var(--text-primary); border:1px solid var(--card-border); }
.btn-secondary:hover:not(:disabled) { background:#e4e4e7; }
.btn-danger { background:var(--danger-bg); color:var(--danger); }
.btn-danger:hover:not(:disabled) { background:#fca5a5; }
.btn-success { background:var(--success-bg); color:var(--success); }
.btn-success:hover:not(:disabled) { background:#86efac; }
.btn-sm { padding:5px 10px; font-size:12px; }
.btn-icon { padding:6px; background:transparent; border:1px solid var(--card-border); color:var(--text-secondary); }
.btn-icon:hover:not(:disabled) { background:#f4f4f5; }
.btn-group { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }

/* ---- Forms ---- */
.form-group { display:flex; flex-direction:column; gap:6px; margin-bottom:16px; }
.form-label { font-size:13px; font-weight:500; }
.form-hint { font-size:11.5px; color:var(--text-muted); }
.form-input,.form-select { width:100%; padding:9px 12px; border:1px solid var(--input-border); border-radius:var(--radius); font-family:var(--font-body); font-size:13.5px; color:var(--text-primary); background:#fff; transition:border-color 0.15s; outline:none; }
.form-input:focus,.form-select:focus { border-color:var(--accent); box-shadow:0 0 0 2px rgba(224,92,46,0.12); }
.form-input[type="number"] { font-family:var(--font-mono); }
.color-input-wrap { display:flex; align-items:center; gap:10px; }
.color-preview { width:36px; height:36px; border-radius:50%; border:2px solid var(--card-border); flex-shrink:0; }
input[type="color"] { width:40px; height:36px; border:1px solid var(--input-border); border-radius:var(--radius); padding:2px; cursor:pointer; background:#fff; }
.inline-use-form { display:flex; align-items:center; gap:6px; }
.form-grid { display:grid; grid-template-columns:1fr 1fr; gap:0 20px; }

/* ---- Distribution bars ---- */
.distribution-grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:16px; }
.dist-item { display:flex; align-items:center; gap:10px; padding:9px 0; border-bottom:1px solid #f4f4f5; }
.dist-item:last-child { border-bottom:none; }
.dist-label { flex:1; font-size:13px; }
.dist-bar-wrap { flex:2; height:6px; background:#e4e4e7; border-radius:99px; overflow:hidden; }
.dist-bar { height:100%; background:var(--accent); border-radius:99px; }
.dist-count { font-family:var(--font-mono); font-size:12px; color:var(--text-secondary); min-width:38px; text-align:right; }

/* ---- Preset grid ---- */
.preset-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(230px,1fr)); gap:14px; margin-top:12px; }
.preset-card { background:var(--card-bg); border:1px solid var(--card-border); border-radius:var(--radius-lg); padding:16px; cursor:pointer; transition:all 0.15s ease; box-shadow:var(--shadow); display:flex; flex-direction:column; gap:8px; }
.preset-card:hover { border-color:var(--accent); box-shadow:0 0 0 2px rgba(224,92,46,0.1),var(--shadow); }
.preset-card.selected { border-color:var(--accent); background:#fff8f5; box-shadow:0 0 0 2px rgba(224,92,46,0.2); }
.preset-card-header { display:flex; align-items:center; gap:10px; }
.preset-card-name { font-weight:600; font-size:14px; }
.preset-card-brand { font-size:12px; color:var(--text-secondary); }
.preset-card-detail { font-size:12px; color:var(--text-muted); font-family:var(--font-mono); }

/* ---- Empty state ---- */
.empty-state { text-align:center; padding:60px 20px; color:var(--text-muted); }
.empty-state p { font-size:14px; }

/* ---- Filter bar ---- */
.filter-bar { display:flex; gap:10px; margin-bottom:16px; flex-wrap:wrap; align-items:center; }

/* ---- Toast ---- */
#toast-container { position:fixed; bottom:24px; right:24px; z-index:9999; display:flex; flex-direction:column; gap:8px; }
.toast { padding:11px 16px; border-radius:var(--radius); background:var(--text-primary); color:#fff; font-size:13.5px; box-shadow:var(--shadow-md); animation:slideIn 0.2s ease; max-width:320px; display:flex; align-items:center; gap:8px; }
.toast.success { background:var(--success); }
.toast.danger  { background:var(--danger); }
.toast.warning { background:var(--warning); }
@keyframes slideIn { from{opacity:0;transform:translateX(12px)} to{opacity:1;transform:translateX(0)} }
@keyframes fadeOut { to{opacity:0;transform:translateX(12px)} }

/* ---- Modal ---- */
.modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.45); z-index:1000; display:flex; align-items:center; justify-content:center; backdrop-filter:blur(2px); }
.modal-overlay.hidden { display:none; }
.modal-box { background:var(--card-bg); border-radius:var(--radius-lg); width:90%; max-width:520px; max-height:90vh; overflow-y:auto; box-shadow:0 20px 60px rgba(0,0,0,0.2); animation:modalIn 0.2s ease; }
@keyframes modalIn { from{opacity:0;transform:scale(0.97) translateY(8px)} to{opacity:1;transform:scale(1) translateY(0)} }
.modal-header { padding:18px 20px 14px; border-bottom:1px solid var(--card-border); display:flex; align-items:center; justify-content:space-between; }
.modal-header h3 { font-size:15px; font-weight:600; }
.modal-close { background:none; border:none; font-size:20px; cursor:pointer; color:var(--text-muted); padding:2px 6px; border-radius:4px; line-height:1; }
.modal-close:hover { background:#f4f4f5; color:var(--text-primary); }
.modal-body { padding:20px; }
.modal-footer { padding:14px 20px; border-top:1px solid var(--card-border); display:flex; justify-content:flex-end; gap:10px; }

/* ---- History log ---- */
.history-log { display:flex; flex-direction:column; }
.log-item { display:flex; gap:14px; padding:13px 0; border-bottom:1px solid #f4f4f5; align-items:flex-start; }
.log-item:last-child { border-bottom:none; }
.log-icon { width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; flex-shrink:0; font-size:13px; }
.log-icon.use    { background:var(--danger-bg);  color:var(--danger); }
.log-icon.return { background:var(--success-bg); color:var(--success); }
.log-icon.add    { background:var(--info-bg);    color:var(--info); }
.log-body { flex:1; }
.log-title { font-size:13.5px; font-weight:500; }
.log-sub { font-size:12px; color:var(--text-secondary); margin-top:2px; }
.log-amount { font-family:var(--font-mono); font-size:13px; font-weight:500; }
.log-amount.use    { color:var(--danger); }
.log-amount.return { color:var(--success); }
.log-amount.add    { color:var(--info); }
.log-date { font-size:11.5px; color:var(--text-muted); white-space:nowrap; }

/* ---- Data manage ---- */
.data-section { display:flex; flex-direction:column; gap:16px; max-width:600px; }
.data-card { background:var(--card-bg); border:1px solid var(--card-border); border-radius:var(--radius-lg); padding:20px; box-shadow:var(--shadow); }
.data-card-title { font-size:15px; font-weight:600; margin-bottom:6px; }
.data-card-desc { font-size:13px; color:var(--text-secondary); margin-bottom:14px; line-height:1.6; }

/* ---- Alert ---- */
.alert-banner { padding:10px 16px; border-radius:var(--radius); font-size:13px; display:flex; align-items:center; gap:8px; margin-bottom:16px; }
.alert-banner.warning { background:var(--warning-bg); color:#92400e; border:1px solid #fde68a; }

/* ---- Qty control ---- */
.qty-control { display:flex; align-items:center; gap:10px; }
.qty-btn { width:28px; height:28px; border-radius:50%; border:1px solid var(--card-border); background:#fff; font-size:16px; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.1s; }
.qty-btn:hover { background:var(--accent); color:#fff; border-color:var(--accent); }
.qty-value { font-family:var(--font-mono); font-size:16px; font-weight:600; min-width:32px; text-align:center; }

@media (max-width:960px) {
  .form-grid { grid-template-columns:1fr; }
  .distribution-grid { grid-template-columns:1fr; }
}
